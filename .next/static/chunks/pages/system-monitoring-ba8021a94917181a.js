(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{163:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8375).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1933:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(7876),l=t(4232),r=t(163);let i=(0,t(8375).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=t(4749),d=t(8448),n=t(9172),o=t(4916);function m(){var e,s,t,m,x,h,u,g,p,v,j,b,N,f,y,w,_,A;let[k,C]=(0,l.useState)(null),[E,M]=(0,l.useState)(null),[z,L]=(0,l.useState)(!0),[R,S]=(0,l.useState)(null),O=async()=>{try{L(!0);let e=await fetch("http://localhost:8000/api/improvements/status");if(e.ok){let s=await e.json();C(s)}let s=await fetch("http://localhost:8000/api/improvements/test-cache",{method:"POST"});if(s.ok){let e=await s.json();M(e)}S(new Date)}catch(e){console.error("Erro ao buscar status do sistema:",e)}finally{L(!1)}};(0,l.useEffect)(()=>{O();let e=setInterval(O,3e4);return()=>clearInterval(e)},[]);let H=e=>{let{status:s,label:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm ".concat(s?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:[s?(0,a.jsx)(r.A,{className:"w-4 h-4"}):(0,a.jsx)(i,{className:"w-4 h-4"}),t]})},q=e=>{let{icon:s,title:t,value:l,subtitle:r,color:i="blue"}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-".concat(i,"-100"),children:s}),(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:t})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:l}),r&&(0,a.jsx)("div",{className:"text-sm text-gray-600",children:r})]})};return z&&!k?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"A carregar dados do sistema..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Monitoriza\xe7\xe3o do Sistema Muzaia"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Estado em tempo real da infraestrutura"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[R&&(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["\xdaltima actualiza\xe7\xe3o: ",R.toLocaleTimeString()]}),(0,a.jsxs)("button",{onClick:O,disabled:z,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 ".concat(z?"animate-spin":"")}),"Actualizar"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado Geral dos M\xf3dulos"}),k&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,a.jsx)(H,{status:k.improvements_available,label:"Melhorias Activas"}),(0,a.jsx)(H,{status:null==(e=k.modules)?void 0:e.config,label:"Configura\xe7\xe3o"}),(0,a.jsx)(H,{status:null==(s=k.modules)?void 0:s.rate_limiting,label:"Rate Limiting"}),(0,a.jsx)(H,{status:null==(t=k.modules)?void 0:t.cache_service,label:"Cache Service"}),(0,a.jsx)(H,{status:!k.errors||0===Object.keys(k.errors).length,label:"Sem Erros"})]})]}),k&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(q,{icon:(0,a.jsx)(d.A,{className:"w-5 h-5 text-blue-600"}),title:"Provedores de IA",value:(null==(x=k.features)||null==(m=x.config)?void 0:m.ai_providers_available)||0,subtitle:"Gemini e Claude configurados",color:"blue"}),(0,a.jsx)(q,{icon:(0,a.jsx)(n.A,{className:"w-5 h-5 text-green-600"}),title:"Clientes Activos",value:(null==(u=k.features)||null==(h=u.rate_limiting)?void 0:h.active_clients)||0,subtitle:"Rate limiting monitorizado",color:"green"}),(0,a.jsx)(q,{icon:(0,a.jsx)(o.A,{className:"w-5 h-5 text-purple-600"}),title:"Cache Hit Ratio",value:"".concat((null==(p=k.features)||null==(g=p.cache_service)?void 0:g.hit_ratio)||0,"%"),subtitle:"Efici\xeancia do cache",color:"purple"}),(0,a.jsx)(q,{icon:(0,a.jsx)(r.A,{className:"w-5 h-5 text-emerald-600"}),title:"Cache Entries",value:(null==(j=k.features)||null==(v=j.cache_service)?void 0:v.memory_cache_size)||0,subtitle:"Entradas em mem\xf3ria",color:"emerald"})]}),E&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resultado do Teste de Cache"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Dados em Cache"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)("pre",{className:"text-sm text-gray-700",children:JSON.stringify(E.cached_data,null,2)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Estat\xedsticas do Cache"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Hits:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==(b=E.cache_stats)?void 0:b.hits)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Misses:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==(N=E.cache_stats)?void 0:N.misses)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Sets:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==(f=E.cache_stats)?void 0:f.sets)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Hit Ratio:"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:[(null==(y=E.cache_stats)?void 0:y.hit_ratio)||0,"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Redis:"}),(0,a.jsx)("span",{className:"font-medium ".concat((null==(w=E.cache_stats)?void 0:w.redis_available)?"text-green-600":"text-orange-600"),children:(null==(_=E.cache_stats)?void 0:_.redis_available)?"Dispon\xedvel":"Fallback Memory"})]})]})]})]})]}),(null==k||null==(A=k.features)?void 0:A.rate_limiting)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configura\xe7\xe3o Rate Limiting"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:k.features.rate_limiting.per_minute_limit}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Requests/Minuto"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:k.features.rate_limiting.per_hour_limit}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Requests/Hora"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:k.features.rate_limiting.active_clients}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Clientes Activos"})]})]})]}),(null==k?void 0:k.errors)&&Object.keys(k.errors).length>0&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-red-900 mb-4",children:"Erros Detectados"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(k.errors).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(i,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-red-900",children:s}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:t})]})]},s)})})]})]})]})}},3496:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/system-monitoring",function(){return t(1933)}])},4749:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8375).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4916:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8375).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},8375:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(4232);let l=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},r=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,s)=>{let{color:t="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:n="",children:o,iconNode:m,...x}=e;return(0,a.createElement)("svg",{ref:s,...i,width:l,height:l,stroke:t,strokeWidth:d?24*Number(c)/Number(l):c,className:r("lucide",n),...!o&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(o)?o:[o]])}),d=(e,s)=>{let t=(0,a.forwardRef)((t,i)=>{let{className:d,...n}=t;return(0,a.createElement)(c,{ref:i,iconNode:s,className:r("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...n})});return t.displayName=l(e),t}},8448:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8375).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9172:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8375).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])}},e=>{e.O(0,[636,593,792],()=>e(e.s=3496)),_N_E=e.O()}]);