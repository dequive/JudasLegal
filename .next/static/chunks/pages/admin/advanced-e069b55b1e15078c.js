(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{1372:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/advanced",function(){return s(2940)}])},2940:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(7876),l=s(4232),r=s(7328),i=s.n(r);let d={1:"Constitui\xe7\xe3o da Rep\xfablica",2:"Lei",3:"Decreto-Lei",4:"Decreto",5:"Regulamento",6:"Portaria",7:"Diploma Ministerial",8:"Instru\xe7\xe3o",9:"Circular",10:"Despacho"},o={1:"Direito Constitucional",2:"Direito Civil",3:"Direito Penal",4:"Direito Comercial",5:"Direito do Trabalho",6:"Direito Administrativo",7:"Direito Fiscal",8:"Direito Fundi\xe1rio",9:"Direito Ambiental",10:"Direito da Fam\xedlia",11:"Processo Civil",12:"Processo Penal",13:"Seguran\xe7a Social",14:"Imigra\xe7\xe3o",15:"Propriedade Intelectual"};function n(){var e,t,s,r,n,c,m,x;let[u,h]=(0,l.useState)(null),[p,b]=(0,l.useState)([]),[j,f]=(0,l.useState)(null),[N,g]=(0,l.useState)({document_type:"",legal_area:"",description:"",source:"Sistema Muzaia"}),[v,w]=(0,l.useState)(!1),[y,_]=(0,l.useState)(null),[D,k]=(0,l.useState)("upload");(0,l.useEffect)(()=>{C(),P()},[]);let C=async()=>{try{let e=await fetch("http://localhost:8000/api/legal/processing-stats"),t=await e.json();h(t)}catch(e){console.error("Erro ao buscar estat\xedsticas:",e)}},P=async()=>{try{let e=await fetch("http://localhost:8000/api/legal/documents-advanced"),t=await e.json();b(t.documents||[])}catch(e){console.error("Erro ao buscar documentos:",e)}},S=async e=>{if(e.preventDefault(),!j)return void alert("Seleccione um arquivo para upload");w(!0),_(null);let t=new FormData;t.append("file",j),N.document_type&&t.append("document_type",N.document_type),N.legal_area&&t.append("legal_area",N.legal_area),N.description&&t.append("description",N.description),N.source&&t.append("source",N.source);try{let e=await fetch("http://localhost:8000/api/legal/upload-advanced",{method:"POST",body:t}),s=await e.json();e.ok?(_(s),f(null),g({document_type:"",legal_area:"",description:"",source:"Sistema Muzaia"}),C(),P()):_({error:s.detail||"Erro no upload"})}catch(e){_({error:e.message})}finally{w(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"Administra\xe7\xe3o Avan\xe7ada - Sistema Muzaia"})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[(0,a.jsx)("div",{className:"bg-black/20 backdrop-blur-sm border-b border-white/10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent",children:"Administra\xe7\xe3o Avan\xe7ada"}),(0,a.jsx)("p",{className:"text-slate-300 mt-2",children:"Sistema de Processamento Hier\xe1rquico Legal - Fase 3"})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>k("upload"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("upload"===D?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":"text-slate-400 hover:text-white"),children:"Upload Avan\xe7ado"}),(0,a.jsx)("button",{onClick:()=>k("documents"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("documents"===D?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"text-slate-400 hover:text-white"),children:"Documentos"}),(0,a.jsx)("button",{onClick:()=>k("stats"),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat("stats"===D?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"text-slate-400 hover:text-white"),children:"Estat\xedsticas"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:["upload"===D&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Upload Hier\xe1rquico"}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Documento Legal"}),(0,a.jsx)("input",{type:"file",accept:".pdf,.docx,.txt",onChange:e=>f(e.target.files[0]),className:"w-full px-4 py-3 bg-black/20 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500"}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Formatos: PDF, DOCX, TXT"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tipo de Documento"}),(0,a.jsxs)("select",{value:N.document_type,onChange:e=>g({...N,document_type:e.target.value}),className:"w-full px-4 py-3 bg-black/20 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-500",children:[(0,a.jsx)("option",{value:"",children:"Detec\xe7\xe3o Autom\xe1tica"}),Object.entries(d).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,className:"bg-slate-800",children:s},t)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"\xc1rea Legal"}),(0,a.jsxs)("select",{value:N.legal_area,onChange:e=>g({...N,legal_area:e.target.value}),className:"w-full px-4 py-3 bg-black/20 border border-white/20 rounded-lg text-white focus:outline-none focus:border-emerald-500",children:[(0,a.jsx)("option",{value:"",children:"Detec\xe7\xe3o Autom\xe1tica"}),Object.entries(o).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,className:"bg-slate-800",children:s},t)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Descri\xe7\xe3o"}),(0,a.jsx)("textarea",{value:N.description,onChange:e=>g({...N,description:e.target.value}),placeholder:"Descri\xe7\xe3o opcional do documento...",rows:3,className:"w-full px-4 py-3 bg-black/20 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Fonte"}),(0,a.jsx)("input",{type:"text",value:N.source,onChange:e=>g({...N,source:e.target.value}),placeholder:"Fonte do documento",className:"w-full px-4 py-3 bg-black/20 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:border-emerald-500"})]}),(0,a.jsx)("button",{type:"submit",disabled:v||!j,className:"w-full py-3 bg-gradient-to-r from-emerald-500 to-blue-500 text-white font-semibold rounded-lg hover:from-emerald-600 hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:v?"Processando...":"Processar Documento"})]})]}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Resultado do Processamento"}),y?(0,a.jsx)("div",{className:"space-y-4",children:y.error?(0,a.jsxs)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-red-300 font-medium",children:"Erro no processamento:"}),(0,a.jsx)("p",{className:"text-red-200",children:y.error})]}):(0,a.jsxs)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-green-300 font-medium mb-3",children:"Documento processado com sucesso!"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-slate-300",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"ID:"})," ",y.document_id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"T\xedtulo:"})," ",y.title]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Chunks:"})," ",y.chunks_created]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Tipo:"})," ",null==(e=y.processing_info)?void 0:e.document_type]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"\xc1rea:"})," ",null==(t=y.processing_info)?void 0:t.legal_area]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Conceitos:"})," ",null==(s=y.processing_info)?void 0:s.legal_concepts_found]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Cita\xe7\xf5es:"})," ",null==(r=y.processing_info)?void 0:r.citations_found]})]})]})}):(0,a.jsx)("div",{className:"text-center text-slate-400 py-12",children:(0,a.jsx)("p",{children:"Resultado do processamento aparecer\xe1 aqui"})})]})]}),"documents"===D&&(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Documentos Processados"}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-white/10",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"ID"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"T\xedtulo"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"Tipo"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"\xc1rea"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"Chunks"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"Autoridade"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-slate-300",children:"Data"})]})}),(0,a.jsx)("tbody",{children:p.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5",children:[(0,a.jsx)("td",{className:"py-3 px-4 text-slate-300",children:e.id}),(0,a.jsx)("td",{className:"py-3 px-4 text-white font-medium max-w-xs truncate",children:e.title}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-300",children:d[e.document_type]||"N/A"}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-300",children:o[e.legal_area]||"N/A"}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-300",children:e.chunk_count}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-16 bg-gray-700 rounded-full h-2 mr-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-emerald-400 to-blue-400 h-2 rounded-full",style:{width:"".concat(100*e.authority_weight,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:[(100*e.authority_weight).toFixed(0),"%"]})]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-400",children:e.created_at?new Date(e.created_at).toLocaleDateString("pt"):"N/A"})]},e.id))})]}),0===p.length&&(0,a.jsx)("div",{className:"text-center text-slate-400 py-12",children:(0,a.jsx)("p",{children:"Nenhum documento processado ainda"})})]})]}),"stats"===D&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Estat\xedsticas Gerais"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-300",children:"Documentos:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:(null==(n=u.general)?void 0:n.total_documents)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-300",children:"Chunks:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:(null==(c=u.general)?void 0:c.total_chunks)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-300",children:"Tipos:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:(null==(m=u.general)?void 0:m.document_types)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-300",children:"\xc1reas:"}),(0,a.jsx)("span",{className:"text-white font-medium",children:(null==(x=u.general)?void 0:x.legal_areas)||0})]})]})]}),u.type_distribution&&(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Por Tipo"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(u.type_distribution).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-slate-300",children:[d[t]||"Tipo ".concat(t),":"]}),(0,a.jsx)("span",{className:"text-white font-medium",children:s})]},t)})})]}),u.area_distribution&&(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Por \xc1rea Legal"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(u.area_distribution).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-slate-300",children:[o[t]||"\xc1rea ".concat(t),":"]}),(0,a.jsx)("span",{className:"text-white font-medium",children:s})]},t)})})]})]})})]})]})]})}},7328:(e,t,s)=>{e.exports=s(5679)}},e=>{e.O(0,[636,593,792],()=>e(e.s=1372)),_N_E=e.O()}]);