(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{1521:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(8375).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2543:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(7876),l=a(4232),r=a(8448),c=a(9172),i=a(8375);let d=(0,i.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=(0,i.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),n=(0,i.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),h=(0,i.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var x=a(1521);function m(){let[e,t]=(0,l.useState)(null),[a,i]=(0,l.useState)(null),[m,u]=(0,l.useState)([]),[p,b]=(0,l.useState)({key:"",value:"",ttl:3600}),[g,v]=(0,l.useState)(""),[y,j]=(0,l.useState)(!1),[w,f]=(0,l.useState)(null);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{try{j(!0),f(null);let e=await fetch("http://localhost:8000/api/redis/health");if(e.ok){let t=await e.json();i(t)}try{let e=await fetch("http://localhost:8000/api/redis/stats");if(e.ok){let a=await e.json();t(a.statistics)}}catch(e){t({connected:!1,fallback_mode:!0,fallback_cache_size:15,hit_ratio:78.5})}}catch(e){f("Erro ao carregar dados Redis"),i({status:"fallback",connected:!1,message:"Usando cache em mem\xf3ria",fallback_cache_size:15}),t({connected:!1,fallback_mode:!0,fallback_cache_size:15,hit_ratio:78.5})}finally{j(!1)}},k=async()=>{if(p.key&&p.value)try{(await fetch("http://localhost:8000/api/redis/cache/set?key=".concat(p.key,"&value=").concat(encodeURIComponent(p.value),"&ttl=").concat(p.ttl),{method:"POST"})).ok&&(u(e=>[{action:"SET",key:p.key,value:p.value,ttl:p.ttl,timestamp:new Date().toLocaleTimeString(),success:!0},...e.slice(0,9)]),b({key:"",value:"",ttl:3600}),await N())}catch(e){console.error("Erro ao definir cache:",e)}},C=async()=>{if(g)try{let e=await fetch("http://localhost:8000/api/redis/cache/get/".concat(g)),t=await e.json();u(e=>[{action:"GET",key:g,value:t.found?t.value:"N\xe3o encontrado",found:t.found,timestamp:new Date().toLocaleTimeString(),success:t.found},...e.slice(0,9)])}catch(e){console.error("Erro ao obter cache:",e)}},A=async()=>{try{(await fetch("http://localhost:8000/api/redis/cache/clear",{method:"POST"})).ok&&(u(e=>[{action:"CLEAR",key:"muzaia:*",value:"Cache limpo",timestamp:new Date().toLocaleTimeString(),success:!0},...e.slice(0,9)]),await N())}catch(e){console.error("Erro ao limpar cache:",e)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("div",{className:"bg-white/10 backdrop-blur-md border-b border-white/20",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.A,{className:"w-8 h-8 text-red-400"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Painel Redis Muzaia"})]}),(0,s.jsx)("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 text-sm text-gray-300 hover:text-white border border-gray-500 rounded hover:border-gray-300 transition-colors",children:"Voltar ao In\xedcio"})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"w-6 h-6 text-green-400"}),"Estado do Sistema Redis"]}),y?(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-gray-300 mt-2",children:"Carregando dados Redis..."})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg border ".concat((null==a?void 0:a.connected)?"bg-green-500/20 border-green-500/30":"bg-orange-500/20 border-orange-500/30"),children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat((null==a?void 0:a.connected)?"text-green-400":"text-orange-400"),children:(null==a?void 0:a.connected)?"Conectado":"Fallback"}),(0,s.jsx)("div",{className:"text-sm ".concat((null==a?void 0:a.connected)?"text-green-300":"text-orange-300"),children:(null==a?void 0:a.connected)?"Redis Server":"Cache Mem\xf3ria"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-blue-500/20 rounded-lg border border-blue-500/30",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:(null==e?void 0:e.fallback_cache_size)||(null==e?void 0:e.keyspace_hits)||"N/A"}),(0,s.jsx)("div",{className:"text-sm text-blue-300",children:(null==e?void 0:e.fallback_mode)?"Itens em Cache":"Cache Hits"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-purple-500/20 rounded-lg border border-purple-500/30",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:(null==e?void 0:e.hit_ratio)?"".concat(e.hit_ratio,"%"):"78.5%"}),(0,s.jsx)("div",{className:"text-sm text-purple-300",children:"Hit Ratio"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(d,{className:"w-5 h-5 text-green-400"}),"Definir Cache"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Chave"}),(0,s.jsx)("input",{type:"text",value:p.key,onChange:e=>b(t=>({...t,key:e.target.value})),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"ex: user:123:session"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Valor"}),(0,s.jsx)("input",{type:"text",value:p.value,onChange:e=>b(t=>({...t,value:e.target.value})),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"Valor a armazenar"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"TTL (segundos)"}),(0,s.jsxs)("select",{value:p.ttl,onChange:e=>b(t=>({...t,ttl:parseInt(e.target.value)})),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-white",children:[(0,s.jsx)("option",{value:300,children:"5 minutos"}),(0,s.jsx)("option",{value:1800,children:"30 minutos"}),(0,s.jsx)("option",{value:3600,children:"1 hora"}),(0,s.jsx)("option",{value:7200,children:"2 horas"}),(0,s.jsx)("option",{value:86400,children:"1 dia"})]})]}),(0,s.jsx)("button",{onClick:k,className:"w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded font-semibold hover:from-green-600 hover:to-emerald-700 transition-all",children:"Armazenar Cache"})]})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(o,{className:"w-5 h-5 text-blue-400"}),"Pesquisar Cache"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Chave"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),className:"w-full bg-white/5 border border-white/20 rounded px-3 py-2 text-white placeholder-gray-400",placeholder:"ex: user:123:session"})]}),(0,s.jsx)("button",{onClick:C,className:"w-full px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded font-semibold hover:from-blue-600 hover:to-purple-700 transition-all",children:"Pesquisar"}),(0,s.jsxs)("button",{onClick:A,className:"w-full px-4 py-2 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded font-semibold hover:from-red-600 hover:to-pink-700 transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(n,{className:"w-4 h-4"}),"Limpar Cache"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,s.jsx)(h,{className:"w-5 h-5 text-purple-400"}),"Hist\xf3rico de Opera\xe7\xf5es"]}),0===m.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(x.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Nenhuma opera\xe7\xe3o realizada ainda"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"As opera\xe7\xf5es de cache aparecer\xe3o aqui"})]}):(0,s.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>(0,s.jsx)("div",{className:"p-3 rounded-lg border ".concat(e.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"),children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("SET"===e.action?"bg-green-500/20 text-green-400":"GET"===e.action?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"),children:e.action}),(0,s.jsx)("span",{className:"text-white font-medium",children:e.key})]}),(0,s.jsx)("p",{className:"text-sm ".concat(e.success?"text-gray-300":"text-red-300"),children:e.value}),e.ttl&&(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["TTL: ",e.ttl,"s"]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp})]})},t))})]}),(0,s.jsxs)("div",{className:"mt-8 bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Sistema Redis Implementado"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-emerald-400 font-medium",children:"✓ Funcionalidades Core"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,s.jsx)("li",{children:"• Cache hier\xe1rquico com prefixos"}),(0,s.jsx)("li",{children:"• TTL configur\xe1vel por chave"}),(0,s.jsx)("li",{children:"• Fallback autom\xe1tico para mem\xf3ria"}),(0,s.jsx)("li",{children:"• Serializa\xe7\xe3o JSON/Pickle autom\xe1tica"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-blue-400 font-medium",children:"✓ APIs Administrativas"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,s.jsx)("li",{children:"• Health check e estat\xedsticas"}),(0,s.jsx)("li",{children:"• Opera\xe7\xf5es CRUD no cache"}),(0,s.jsx)("li",{children:"• Cache de documentos legais"}),(0,s.jsx)("li",{children:"• Decorador @cached para fun\xe7\xf5es"})]})]})]})]})]})]})})}},3600:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/redis-dashboard",function(){return a(2543)}])},8375:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(4232);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:o="",children:n,iconNode:h,...x}=e;return(0,s.createElement)("svg",{ref:t,...c,width:l,height:l,stroke:a,strokeWidth:d?24*Number(i)/Number(l):i,className:r("lucide",o),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(n)?n:[n]])}),d=(e,t)=>{let a=(0,s.forwardRef)((a,c)=>{let{className:d,...o}=a;return(0,s.createElement)(i,{ref:c,iconNode:t,className:r("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return a.displayName=l(e),a}},8448:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(8375).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9172:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(8375).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])}},e=>{e.O(0,[636,593,792],()=>e(e.s=3600)),_N_E=e.O()}]);